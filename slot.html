<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">	
	<title>老虎机</title>
	<script src="js/common.js"></script>	
	<link rel="stylesheet" href="css/reset-m.css">		
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/share.css">
	<link rel="stylesheet" href="css/slot.css">		
</head>
<body>
	<header></header>

	<div class="slot" id="slot">
		<div class="title">
			<span>老虎机</span>			
			<div class="icon favorite"></div>
			<div class="icon search"></div>
							
			<div class="search-field">
				<form>
					<input type="text" name="searchBox" id="searchBox" placeholder="游戏搜索">
					<span class="close">X</span>
				</form>
			</div>			
		</div>
		
		<div class="filter">
			<div class="brands clearfix">
				<div class="active">PNG</div>
				<div>MG</div>
				<div>TTG</div>
				<div>NYX</div>
				<div>PT</div>
				<div>BS</div>
				<div>IM</div>
				<div>AG</div>
			</div>
			<div class="categories">
				<ul class="clearfix">
					<li class="active">全部</li>
					<li>热门</li>
					<li>最新</li>
					<li>老虎机</li>
					<li>桌面游戏</li>
					<li>真人</li>
					<li>捕鱼王</li>
					<li>很好玩</li>
					<li>快来玩</li>
					<li>好游戏</li>
				</ul>
			</div>
		</div>

		<div class="content " id="content">	
			<section class="sections sec1 clearfix">
				<div class="game">
					<p>勇敢神探</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_01@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>藏宝阁</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_02@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>浪漫巴黎</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_03@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>金戈独专</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_04@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>勇敢神探</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_05@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>藏宝阁</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_06@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>浪漫巴黎</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_07@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>金戈独专</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_08@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>勇敢神探</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_09@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>
				<div class="game">
					<p>藏宝阁</p>
					<dl>
						<dt>
							<img src="imgs/slot/Game_420x330_01@3x.jpg" alt="">
							<span class="collection"></span>
						</dt>
						<dd class="clearfix">
							<span class="start">开始游戏</span>
							<span class="demo">试玩</span>
						</dd>
					</dl>
				</div>				
			</section>	
			<!-- PART 1		 -->
			<div class="loading"></div>
		</div>

		<div class="pagination clearfix">
			<ul>
				<li><a href="javascript:void(0);">首页</a></li>
				<li><a href="javascript:void(0);">上一页</a></li>
				<li><a href="javascript:void(0);">下一页</a></li>
				<li><a href="javascript:void(0);">末页</a></li>
				<li><span class="total-page">共<span>26</span>页</span></li>
			</ul>
			<div>					
				<form id="paginationForm">
					<input class="num" type="number" name="page" value="5" max="99">
					<div class="go">GO</div>
				</form>
			</div>
		</div>
	</div>
	
	<nav class="tab-bar"></nav>
	<footer></footer>

	<script src="js\jquery-2.1.1.min.js"></script>
	<script src="js\jquery.validate\jquery.validate.js"></script>
	<script src="js\jquery.validate\additional-methods_custom.js"></script>
	<script src="js\jquery.validate\messages_zh.js"></script>
	<script src="js\share.js"></script>
	<script type="text/javascript">	
		$(document).ready(function() {
			var trigger = true;
			var count = 1;
			var limit = 2;//一个页面最多加载2次，也就是30笔资料
			$(window).scroll(function() {
				//console.log(($(document).height() - $(window).height()) - $(document).scrollTop());
				//在距离底部 100px 位置时加载新的内容
				if (($(document).height() - $(window).height()) - $(document).scrollTop() <= 100) {
					//当前次加载完毕 & 载入次数不超过限制时持续加载
					if(trigger && count<=limit){
					  	$.ajax({
				            url: "slot2.html",                
				            dataType:'html',
				            beforeSend: function(){
				            	console.log("加载中");
				            	$(".loading").show();
				            },
				            complete: function(){
				            	//利用定时器做加载三秒效果
				            	setTimeout(function(){			            		
					            	$(".loading").hide();
					            	console.log("加载完成");
				            	},3000);

				            	count++;			            	
				            },
				            success: function(msg){	
				            	//利用定时器做加载两秒效果
				            	setTimeout(function(){
					                console.log("加载中....");
					                $(".loading").before(msg);
					                trigger = true;
				            },2000);
				                
				            },
				            error:function(xhr, ajaxOptions, thrownError){ 
				                 console.log("ERROR....");
				            }
				        });	
				        trigger = false;
					}
				}
			});


			//搜寻框互动: 
			$('.search').on('click',function(){
				if($(this).hasClass('opened')){
					$(this).removeClass("opened");
					$('.search-field').fadeOut(300);
				}else{
					$(this).addClass("opened");
					$('.search-field').fadeIn(300);
				}	
			});
			$('#searchBox').on('blur', function(){
				$('.search').removeClass("opened");
				$('.search-field').fadeOut(300);
			});

			//右上最爱选择
			$('.favorite').on('click', function(){	
				if($(this).hasClass('active')){
					$(this).removeClass("active");
				}else{
					$(this).addClass("active");
				}
			})

			//游戏品牌选择
			$('.brands div').on('click', function(){
				$('.brands div').removeClass('active');
				$(this).addClass('active');
			})

			//滑动选单互动
			$('.categories li').on('click',function(){
				$('.categories li').removeClass("active");
				$(this).addClass("active");
			});

			//游戏加到最爱			
			$(".content").on("click", '.collection', function () {
			    if($(this).hasClass('active')){
			    	$(this).removeClass("active");
			    }else{
			    	$(this).addClass("active");
			    }
			});			

			//pagination
			// $('.go').on("click",function(){
			// 	console.log("get page" + $('#paginationForm input').val())
			// 	$('#paginationForm').submit();
			// });
			//先移至 SHARE.JS 做测试

			//动态计算分类的宽度
			var li = $('.categories').find('li');
			var w = 0;
			for(var i=0; i<li.length; i++){			
				w += li.eq(i).outerWidth();			
			}
			li.parent().css("width", w+"px");

			
		});
	</script>
</body>
</html>




